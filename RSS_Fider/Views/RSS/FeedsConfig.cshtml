@model FeedsConfiguration

@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Список пользователей</title>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    @inject IConfiguration configuration;

    <h2>Список пользователей</h2>
    
    <table class="table table-condensed table-striped table-bordered">
        <thead><tr><th>Адрес ленты</th><th>Вкл/выкл</th><th>Новый адрес</th></tr></thead>
        <tbody>
        
        @for (int i = 0;i < Model.Feeds_Addresses.Url.Count; i++)
        {
                string EnableButtonTitle = (Model.Feeds_States.Enable[i] == "true") ? "Выключить ленту" : "Включить ленту";
                string EnableButtonId = $"EnableButton{i}";
                string UrlInputId = $"UrlInputId{i}";
                string ChangeButtonId = $"ChangeButton{i}";
                <tr>
                    <td>@Model.Feeds_Addresses.Url[i]</td>
                    <td>
                        <input id=@EnableButtonId type="button" value=@EnableButtonTitle onclick="ChangeFeedState(@i)" />
                    </td>
                    <td>
                        <input id=@UrlInputId type="text" name="UpdateTime" />
                        <input id=@ChangeButtonId type="button" value="Изменить" onclick="ChangeFeedUrl(@i)" />

                    </td>
                </tr>
        }

    
        </tbody>
    </table>



    <script>
        function ChangeFeedState(FeedId) {
            $.post("/RSS/RssChangeFeedState", { FeedId: FeedId })
                .done(function(data) {
                });
        }

        function ChangeFeedUrl(FeedId) {

            var val = document.getElementById(`UrlInputId${FeedId}`).value;

            $.post("/RSS/RssChangeFeedUrl", { FeedId: FeedId, newUrl: val })
                .done(function(data) {
                });
        }
    </script>








    
</body>
</html>
